From 0922916800198493d63a65d9e0fcc6f17e2724bb Mon Sep 17 00:00:00 2001
From: Xu Mao <B34688@freescale.com>
Date: Fri, 17 Jan 2014 11:24:11 +0800
Subject: [PATCH 44/95] ENGR00133115 use stagefright to play httplive url

use stagefright to play httplive url

Signed-off-by: Xu Mao <B34688@freescale.com>
---
 media/libmediaplayerservice/MediaPlayerFactory.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/media/libmediaplayerservice/MediaPlayerFactory.cpp b/media/libmediaplayerservice/MediaPlayerFactory.cpp
index 2089bda..7227a75 100644
--- a/media/libmediaplayerservice/MediaPlayerFactory.cpp
+++ b/media/libmediaplayerservice/MediaPlayerFactory.cpp
@@ -385,6 +385,12 @@ class OMXPlayerFactory : public MediaPlayerFactory::IFactory {
             if (!strncasecmp(url, "http://", 7)) { 
                 if (isWVM(url, headers))
                 return 0.0;
+
+                size_t len = strlen(url);
+                if (len >= 5 && !strcasecmp(".m3u8", &url[len - 5])) {
+                    return 0.0;
+                }
+                
             }
 
             if (!strncasecmp(url, "http://", 7) \
-- 
1.8.0

